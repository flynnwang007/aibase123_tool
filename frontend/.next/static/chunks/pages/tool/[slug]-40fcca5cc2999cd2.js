(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{42710:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var s=r(51478),n=r(73467),a=r(18557),i=r(28801),c=r(51489),l=r.n(c),o=r(63175),u=r(36730),d=r(19625),x=r(11230),m=r(87757),h=r.n(m),f=r(11163),j=r(67294),p=r(75989),g=r(24896),v=r(23152),Z=r(99244),N=r(26803),y=r(27679),w=r(25675),b=r.n(w),_=r(86540),S=r(58097),k=r(57506),P=r(25827),I=r(56767),C=r(84988),E=r(10),F=r(79088),J=r(35296),O=r(85893),T=F.Z.TextArea,D=function(e){var t=e.comments;return(0,O.jsx)(I.Z,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return(0,O.jsx)(I.Z.Item,{children:(0,O.jsx)(I.Z.Item.Meta,{avatar:(0,O.jsx)(E.Z,{icon:(0,O.jsx)(J.Z,{})}),title:(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{children:e.username}),(0,O.jsx)(C.Z,{disabled:!0,defaultValue:e.rating})]}),description:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{children:e.content}),(0,O.jsx)("div",{className:"text-gray-400 text-sm",children:new Date(e.created_at).toLocaleDateString()})]})})})}})},q=function(e){e.tool;var t,r=(0,j.useState)([]),s=r[0],n=r[1],a=(0,j.useState)(!1),i=a[0],c=a[1],o=k.Z.useForm(),x=(0,P.Z)(o,1)[0],m=(t=(0,d.Z)(h().mark(function e(t){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{c(!0),r={id:Date.now(),username:"访客用户",content:t.content,rating:t.rating,created_at:new Date().toISOString()},n([r].concat((0,S.Z)(s))),x.resetFields(),u.ZP.success("评论提交成功！")}catch(e){console.error("Submit comment failed:",e),u.ZP.error("评论提交失败，请稍后重试")}finally{c(!1)}case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return(0,O.jsxs)("div",{children:[(0,O.jsxs)(k.Z,{form:x,onFinish:m,className:"mb-8",children:[(0,O.jsx)(k.Z.Item,{name:"rating",rules:[{required:!0,message:"请选择评分"}],children:(0,O.jsx)(C.Z,{allowHalf:!0})}),(0,O.jsx)(k.Z.Item,{name:"content",rules:[{required:!0,message:"请输入评论内容"}],children:(0,O.jsx)(T,{rows:4,placeholder:"分享你的使用体验..."})}),(0,O.jsx)(k.Z.Item,{children:(0,O.jsx)(l(),{htmlType:"submit",type:"primary",loading:i,children:"提交评论"})})]}),(0,O.jsx)(D,{comments:s})]})},z=r(16924),B=r(37531),L=x.Z.Title,M=x.Z.Paragraph,V=function(){var e,t,r,c=(0,f.useRouter)(),x=c.query.slug,m=(0,j.useState)(null),w=m[0],S=m[1],k=(0,j.useState)([]),P=k[0],I=k[1],C=(0,j.useState)(!0),E=C[0],F=C[1],J=(0,j.useState)(!1),T=J[0],D=J[1];(0,j.useEffect)(function(){if(x){var e;(e=(0,d.Z)(h().mark(function e(){var t;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,B.Jh.getBySlug(x);case 4:return S(t=e.sent),e.next=8,B.Jh.getByCategory(t.category_id);case 8:return I(e.sent.filter(function(e){return e.id!==t.id}).slice(0,4)),e.next=12,B.Jh.incrementViews(t.id);case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Failed to fetch tool:",e.t0),u.ZP.error("获取工具信息失败"),c.push("/");case 19:return e.prev=19,F(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[0,14,19,22]])})),function(){return e.apply(this,arguments)})()}},[x,c]);var V=(e=(0,d.Z)(h().mark(function e(){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(window.location.href);case 3:u.ZP.success("链接已复制到剪贴板"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Share failed:",e.t0),u.ZP.error("分享失败，请手动复制链接");case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return e.apply(this,arguments)});return E?(0,O.jsx)(_.Z,{children:(0,O.jsx)("div",{className:"flex justify-center py-20",children:(0,O.jsx)(o.default,{size:"large"})})}):w?(0,O.jsx)(_.Z,{children:(0,O.jsxs)("div",{className:"container mx-auto py-6",children:[(0,O.jsx)(a.Z,{className:"mb-6",children:(0,O.jsxs)("div",{className:"flex items-start gap-6",children:[(0,O.jsx)("div",{className:"flex-shrink-0",children:(0,O.jsx)(b(),{src:w.logo_url,alt:w.name,width:100,height:100,className:"rounded-lg"})}),(0,O.jsxs)("div",{className:"flex-1",children:[(0,O.jsxs)("div",{className:"flex justify-between items-start",children:[(0,O.jsx)(L,{level:2,className:"!mb-2",children:w.name}),(0,O.jsxs)("div",{className:"flex gap-2",children:[(0,O.jsx)(l(),{icon:T?(0,O.jsx)(p.Z,{}):(0,O.jsx)(g.Z,{}),onClick:function(){if(w)try{var e=JSON.parse(localStorage.getItem("favorites")||"[]");if(T){var t=e.filter(function(e){return e!==w.id});localStorage.setItem("favorites",JSON.stringify(t)),u.ZP.success("已取消收藏")}else e.push(w.id),localStorage.setItem("favorites",JSON.stringify(e)),u.ZP.success("收藏成功");D(!T)}catch(e){console.error("Favorite action failed:",e),u.ZP.error("操作失败，请稍后重试")}},type:T?"primary":"default",children:T?"已收藏":"收藏"}),(0,O.jsx)(l(),{icon:(0,O.jsx)(v.Z,{}),onClick:V,children:"分享"})]})]}),(0,O.jsx)(M,{className:"text-gray-600 mb-4",children:w.description}),(0,O.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,O.jsx)(l(),{type:"primary",icon:(0,O.jsx)(Z.Z,{}),href:w.website_url,target:"_blank",size:"large",children:"访问网站"}),(0,O.jsx)("div",{className:"space-x-2",children:w.tags.map(function(e){return(0,O.jsx)(i.Z,{color:"blue",children:e.name},e.id)})})]}),(0,O.jsxs)("div",{className:"flex items-center text-gray-500 text-sm gap-6",children:[(0,O.jsxs)("span",{children:[(0,O.jsx)(N.Z,{className:"mr-1"}),w.views," 次浏览"]}),(0,O.jsxs)("span",{children:[(0,O.jsx)(y.Z,{className:"mr-1"}),(t=w.category_id,(null==(r=z.b.find(function(e){return e.id===t}))?void 0:r.name)||"")]})]})]})]})}),(0,O.jsx)(a.Z,{title:"评价与评论",className:"mb-6",children:(0,O.jsx)(q,{tool:w})}),P.length>0&&(0,O.jsx)(a.Z,{title:"相关工具",children:(0,O.jsx)(s.Z,{gutter:[16,16],children:P.map(function(e){return(0,O.jsx)(n.Z,{xs:24,sm:12,md:8,lg:6,children:(0,O.jsx)(a.Z,{hoverable:!0,onClick:function(){return c.push("/tool/".concat(e.slug))},cover:(0,O.jsx)("div",{className:"p-4",children:(0,O.jsx)(b(),{src:e.logo_url,alt:e.name,width:60,height:60,className:"rounded"})}),children:(0,O.jsx)(a.Z.Meta,{title:e.name,description:e.description})})},e.id)})})})]})}):null}},72219:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool/[slug]",function(){return r(42710)}])}},function(e){e.O(0,[866,287,730,994,609,175,421,324,438,774,888,179],function(){return e(e.s=72219)}),_N_E=e.O()}]);